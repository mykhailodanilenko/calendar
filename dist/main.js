(()=>{const e=document.querySelector(".submit"),t=document.querySelector(".cancel");function l(){document.querySelector(".name-input").value="",document.querySelector(".day-selector").value="mon",document.querySelector(".time-selector").value=10,document.querySelector(".member-selector").value="all"}function n(e){e.preventDefault(),document.querySelector(".popup-container").style.visibility="visible";let t=this.previousElementSibling.textContent;const l=document.createElement("p");l.classList.add("popup-text"),l.innerText+=`Are you sure you want to delete "${t}" event?`;let n=e.currentTarget;document.querySelector(".popup").appendChild(l),document.querySelector(".confirm-delete").addEventListener("click",(function(e){localStorage.removeItem(n.parentElement.id),n.parentElement.remove(),l.remove(),t="",n=null,document.querySelector(".popup-container").style.visibility="hidden"})),document.querySelector(".deny-delete").addEventListener("click",(function(e){l.remove(),t="",n=null,document.querySelector(".popup-container").style.visibility="hidden"}))}window.addEventListener("load",(function(e){Object.keys(localStorage).forEach((e=>{const t=document.createElement("div"),l=e.slice(0,5);document.querySelector(`.${l}`).appendChild(t),t.outerHTML=localStorage.getItem(e),document.querySelectorAll(".close").forEach((e=>{e.addEventListener("click",n)}))}))})),e.addEventListener("click",(function(e){e.preventDefault();const t=document.createElement("div");t.classList.add("occupied");const c=document.createElement("div");c.innerText=document.querySelector(".name-input").value,c.classList.add("eventinfo");const i=document.createElement("button");i.classList.add("close"),i.addEventListener("click",n),i.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x" viewBox="0 0 16 16"><path d="M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"/></svg>',t.appendChild(c),t.appendChild(i);const o=document.querySelector(".day-selector").value+document.querySelector(".time-selector").value;if(0==document.querySelector(`.${o}`).childElementCount){document.querySelector(`.${o}`).appendChild(t);const e=[...document.querySelector(".member-selector").selectedOptions].map((e=>e.value));t.classList.add(...e),t.id=`${o}event`,l(),document.querySelector(".errormsg-container").style.visibility="hidden",document.querySelector(".view-addevent").style.visibility="hidden",document.querySelector(".view-calendar").style.visibility="visible"}else document.querySelector(`.${o}`).childElementCount>=1&&(document.querySelector(".errormsg-container").style.visibility="visible");var s,r;""!==t.id&&(s=t.id,r=t.outerHTML,localStorage.setItem(s,r))})),t.addEventListener("click",(function(e){e.preventDefault(),l(),document.querySelector(".errormsg-container").style.visibility="hidden",document.querySelector(".view-addevent").style.visibility="hidden",document.querySelector(".view-calendar").style.visibility="visible"})),document.getElementById("filter").addEventListener("click",(function(e){document.querySelectorAll(".occupied").forEach((t=>{switch(e.target.value){case"all":t.style.display="flex";break;case"michael":t.classList.contains("michael")||t.classList.contains("all")?t.style.display="flex":t.style.display="none";break;case"sergey":t.classList.contains("sergey")||t.classList.contains("all")?t.style.display="flex":t.style.display="none";break;case"ivan":t.classList.contains("ivan")||t.classList.contains("all")?t.style.display="flex":t.style.display="none";break;case"olga":t.classList.contains("olga")||t.classList.contains("all")?t.style.display="flex":t.style.display="none"}}))}))})();